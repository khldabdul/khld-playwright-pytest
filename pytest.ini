[pytest]
# Import mode - use importlib to handle duplicate test file names across apps
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Pytest options
addopts =
    -v
    --strict-markers
    --tb=short
    --import-mode=importlib

# Test paths - all tests are inside apps/ directory
testpaths = apps

# Playwright configuration (can be overridden via CLI)
# --base-url is set per-app, not globally
# --browser=chromium
# --headed=false
# --screenshot=only-on-failure
# --video=retain-on-failure
# --tracing=retain-on-failure

# Markers
markers =
    app(name): mark test as belonging to a specific app
    testcase(id): link test to test case ID in TEST_CASES.md (e.g., TC-SD-001)
    requirement(id): link test to requirement/user story ID (e.g., US-USER-001)
    smoke: smoke tests - quick validation of critical paths
    regression: regression tests - comprehensive coverage
    api: API tests
    ui: UI/E2E tests
    e2e: End-to-end tests
    slow: slow running tests (>30 seconds)
    integration: integration tests spanning multiple components
    flaky: flaky test that may fail intermittently
    critical: critical path tests

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S
